/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/* 
 * File:   anexos.c
 * Author: felipe
 *
 * Created on 15 de marzo de 2016, 12:15
 */

#include <stdio.h>
#include <stdlib.h>
#include <math.h>

/*
 * 
 */
int cont=0;
int tramo(int nfin,int nini, int efin, int eini, char* nameini, char* namefin)
{
        float dy=nfin-nini;
        float dx=efin-eini;
        float d=sqrt(dx*dx+dy*dy);
        //printf("%d,%d\t%s,%d\n",nini,eini,nameini,(int)d);
        
        int num=(4090000-nini)/10 + ((eini-370000)/10)*2000;
        //printf("%d,",num);
        //printf("tower[%d]=get_point_id(%d,%d);\n",cont++,nini,eini);
            printf("%d, %d\n",num,cont++);
        int n=d/150;
        for(int i=0;i<n;i++)
        {
            int ix=eini+((i+1)*(dx/(n+1)));
            int iy=nini+((i+1)*(dy/(n+1)));
            num=(4090000-iy)/10 + ((ix-370000)/10)*2000;
            //printf("tower[%d]=get_point_id(%d,%d);\n",cont++,iy,ix);
            //printf("%d,",num);
            printf("%d, %d\n",num,cont++);
        }
        return (int)d;
}

int main(int argc, char** argv) {
    int northL1[3];
    int northL2[7];
    int northL3[19];
    int eastL1[3];
    int eastL2[7];
    int eastL3[19];
    char nameL1[3][20];
    char nameL2[7][20];
    char nameL3[19][20];
    
    FILE *f1= fopen("anexos/lista1.txt","rt");
    FILE *f2= fopen("anexos/lista2.txt","rt");
    FILE *f3= fopen("anexos/lista3.txt","rt");
    for(int j=0;j<3;j++)fscanf(f1,"%d,%d,%s\n",&northL1[j],&eastL1[j],nameL1[j]);
    for(int j=0;j<7;j++)fscanf(f2,"%d,%d,%s\n",&northL2[j],&eastL2[j],nameL2[j]);
    for(int j=0;j<19;j++)fscanf(f3,"%d,%d,%s\n",&northL3[j],&eastL3[j],nameL3[j]);
    fclose(f1);
    fclose(f2);
    fclose(f3);
    float total;
    total=0;
    cont=0;
    for(int j=0;j<3;j++)total+=tramo(northL1[(j+1)%3],northL1[j],eastL1[(j+1)%3],eastL1[j],nameL1[j],nameL1[(j+1)%3]);
    //printf("4070000,373400,Base\n");
    printf("Total: %d\n\n",(int)total);
    total=0;
    cont=0;
    for(int j=0;j<7;j++)total+=tramo(northL2[(j+1)%7],northL2[j],eastL2[(j+1)%7],eastL2[j],nameL2[j],nameL2[(j+1)%7]);
    //printf("4070000,373400,Base\n");
    printf("Total: %d\n\n",(int)total);
    total=0;
    cont=0;
    for(int j=0;j<19;j++)total+=tramo(northL3[(j+1)%19],northL3[j],eastL3[(j+1)%19],eastL3[j],nameL3[j],nameL3[(j+1)%19]);
    //printf("4070000,373400,Base\n");
    printf("Total: %d\n\n",(int)total);
    return (EXIT_SUCCESS);
}

void setCustomTrack_2(int identifier)
{
int t1[149]={682000,697988,715975,733963,751951,767939,785927,803915,821903,837891,855879,873867,891855,907843,925831,943819,961807,977795,995783,
        1013771,1031759,1047747,1065735,1083723,1101711,1117698,1135686,1153674,1171662,1187650,1205638,1223626,1241614,1257602,1275590,
        1293578,1311566,1327554,1345542,1363530,1381518,1397506,1415494,1433482,1451470,1467458,1485446,1503434,1521421,1537409,1555397,
        1573385,1591373,1607361,1625349,1643337,1661325,1677313,1695301,1713289,1731277,1747265,1765253,1783241,1801229,1817217,1835205,
        1853193,1871181,1841182,1813183,1783185,1755186,1725187,1697189,1667190,1639192,1611193,1581194,1553196,1523197,1495198,1465200,
        1437201,1407203,1379204,1351205,1321207,1293208,1263209,1235211,1205212,1177213,1147215,1119216,1091218,1083232,1075247,1067261,
        1059276,1053290,1045304,1037319,1029333,1021348,1015362,1007377,999391,991406,983420,977435,969449,961464,953478,945493,939507,
        931522,923536,915551,907565,901580,893594,885609,877623,869638,863652,855667,847681,839695,831710,825724,817739,809753,801768,
        793782,787797,779811,771826,763840,755855,749869,741884,733898,725913,717927,711942,703956,695971,687985};

int t2[162]={682000,695987,711975,727962,743950,759937,775925,791912,807900,821888,837875,853863,869850,885838,901825,917813,933800,947788,
963775,979763,995751,1011738,1027726,1043713,1059701,1073688,1089676,1105663,1121651,1137639,1153626,1169614,1185601,1199589,1215576,1231564,
1247551,1263539,1279526,1295514,1311502,1311487,1311472,1313457,1313442,1315427,1315412,1315397,1317382,1317367,1319353,1343345,1369337,1393329,
1419321,1443313,1469306,1493298,1519290,1543282,1569274,1595267,1619259,1645251,1669243,1695235,1719227,1745220,1769212,1795204,1819196,1845188,
1871181,1841182,1813183,1783185,1755186,1725187,1697189,1667190,1639192,1611193,1581194,1553196,1523197,1495198,1465200,1437201,1407203,1379204,
1351205,1321207,1293208,1263209,1235211,1205212,1177213,1147215,1119216,1091218,1065225,1041232,1015239,991247,965254,941261,915268,891275,
865283,841290,815297,791304,767312,753325,739338,725351,711365,697378,685391,671404,657417,643431,629444,617457,603470,589484,575497,561510,
549523,535537,521550,507563,493576,481590,487604,493618,501632,507646,515660,521674,529689,535703,543717,549731,555745,563759,569773,577788,
583802,591816,597830,605844,611858,617872,625886,631901,639915,645929,653943,659957,667971,673985};

int t3[235]={
682000,707995,735990,763985,791981,819976,847971,873967,901962,929957,
957952,985948,1013943,1039938,1067933,1095929,1123924,1151919,1179915,1193903,
1207892,1221881,1235869,1249858,1263847,1277836,1249830,1223824,1197818,1169813,
1143807,1117801,1091796,1063790,1037784,1011778,983773,957767,931761,905756,
915742,927729,937715,949702,961689,969676,979663,989650,997637,1007624,
1017611,1039602,1061594,1083585,1107577,1129569,1151560,1175552,1197544,1219535,
1243527,1265518,1287510,1311502,1311487,1311472,1313457,1313442,1315427,1315412,
1315397,1317382,1317367,1319353,1341345,1363336,1385328,1409320,1431312,1453304,
1475296,1499288,1521280,1543272,1565264,1589256,1613249,1639242,1665235,1691228,
1717221,1741215,1767208,1793201,1819194,1845187,1871181,1865167,1859152,1855138,
1849124,1845110,1839096,1835082,1829068,1825054,1819040,1815026,1809012,1804998,
1776993,1750989,1722985,1696981,1668977,1642973,1614969,1588965,1576951,1564937,
1552924,1540910,1530896,1518883,1506869,1494855,1484842,1460851,1438859,1414868,
1392877,1370886,1346895,1324904,1302913,1278922,1256931,1234940,1210949,1188958,
1166967,1142976,1120985,1098994,1075003,1053012,1031021,1007029,985037,963046,
939054,917063,895071,871080,849088,827096,803105,781113,759122,783129,
809136,835144,861151,885159,911166,937173,963181,987188,1013195,1039203,
1065210,1091218,1071229,1053240,1033251,1015263,995274,977285,957296,939308,
909308,881309,853310,823310,795311,767312,753325,739338,725351,711365,
697378,685391,671404,657417,643431,629444,617457,603470,589484,575497,
561510,549523,535537,521550,507563,493576,481590,487604,493618,501632,
507646,515660,521674,529689,535703,543717,549731,555745,563759,569773,
577788,583802,591816,597830,605844,611858,617872,625886,631901,639915,
645929,653943,659957,667971,673985};

}
/*
void setCustomTrack_1(int identifier)
{
int ntracks[17];
int *tracks[17];             // Multiple viewshed for 15 tracks in Sierra de las Nieves

	char a[100];
	int b,c,d;
	int longi[16]={0,193,315,561,711,860,1171,1493,1719,2034,2303,2617,2907,3074,3283,3350};
	int *listas[17];
	for(int i=0;i<15;i++)tracks[i]=(int *)malloc(4*(ntracks[i]=longi[i+1]-longi[i]));
        ntracks[15]=ntracks[1]+ntracks[2]+ntracks[3];
        ntracks[16]=ntracks[11]+ntracks[12];
        
        tracks[15]=(int *)malloc(4*ntracks[15]);
        tracks[16]=(int *)malloc(4*ntracks[16]);
	FILE *f1=fopen("input/tracks.txt","r");
	for(int i=0;i<15;i++){
		for(int j=0;j<ntracks[i];j++){fscanf(f1,"%d;%d;%d\n",&b,&c,&d);
		if(i!=b)
			break;
		else
			tracks[i][j]=((d-utm_e)/step)*dimy+(utm_n-c)/step;}
	}
        if(verbose)printf("Reading tracks\n");
        int cnt=0;
        for(int j=0;j<ntracks[1];j++)tracks[15][cnt++]=tracks[1][j];
        for(int j=0;j<ntracks[2];j++)tracks[15][cnt++]=tracks[2][j];
        for(int j=0;j<ntracks[3];j++)tracks[15][cnt++]=tracks[3][j];
        cnt=0;
        for(int j=0;j<ntracks[11];j++)tracks[16][cnt++]=tracks[11][j];
        for(int j=0;j<ntracks[12];j++)tracks[16][cnt++]=tracks[12][j];
        if(verbose)printf("Successfully read tracks\n");
                        towers=tracks[identifier];
                        ntowers=ntracks[identifier];

}
 */